<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Austrian Economics Simulator</title>
    <style>
        :root {
            --bg-color: #050a0f;
            --cyan: #5ffbf1;
            --red: #ff5f5f;
            --green: #5fff8f;
            --dark-green: #1a4d2e;
            --grid-line: #1a2f38;
            --font-main: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background-color: var(--bg-color);
            color: var(--cyan);
            font-family: var(--font-main);
            margin: 0;
            padding: 20px;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            text-transform: uppercase;
        }

        /* CRT Overlay Effect */
        .crt::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        .container {
            display: grid;
            grid-template-columns: 200px 250px 150px;
            grid-template-rows: auto auto auto;
            gap: 10px;
            border: 2px solid var(--cyan);
            padding: 10px;
            background: #000;
            box-shadow: 0 0 20px rgba(95, 251, 241, 0.2);
            position: relative;
            max-width: 100%;
        }

        /* Header */
        .header {
            grid-column: 1 / -1;
            border: 2px solid var(--cyan);
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            letter-spacing: 2px;
            background: rgba(95, 251, 241, 0.1);
        }

        .logo {
            border: 2px solid var(--green);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--green);
        }

        /* Left Column - Portrait */
        .portrait-panel {
            border: 2px solid var(--grid-line);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            position: relative;
            overflow: hidden;
            background: #0a151a;
        }

        .economist-face {
            width: 100%;
            height: 100%;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Murray_Rothbard.jpg/250px-Murray_Rothbard.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: grayscale(100%) contrast(150%);
            opacity: 0.5;
        }

        .pills {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 20px;
            opacity: 0.7;
        }

        /* Middle Column - Manhole */
        .action-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .status-box {
            border: 2px solid var(--red);
            padding: 5px;
            text-align: center;
            font-size: 0.8rem;
        }

        .status-text {
            color: var(--red);
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 5px;
        }

        .manhole-display {
            height: 150px;
            border: 2px solid var(--red);
            display: flex;
            align-items: center;
            justify-content: center;
            background: #111;
            position: relative;
        }

        .manhole-cover {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #444 20%, #333 21%, #333 40%, #444 41%, #444 60%, #333 61%);
            border-radius: 50%;
            border: 4px dashed #555;
            box-shadow: inset 0 0 10px #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #222;
            font-weight: bold;
            font-size: 0.8rem;
            text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .manhole-cover.missing {
            opacity: 0.1;
        }

        .btn {
            background: transparent;
            padding: 10px;
            font-family: var(--font-main);
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.1s;
        }

        .btn:active {
            transform: translateY(2px);
        }

        .btn-steal {
            border: 2px solid var(--red);
            color: var(--red);
        }

        .btn-steal:hover {
            background: rgba(255, 95, 95, 0.2);
        }

        .btn-sell {
            border: 2px solid var(--cyan);
            color: var(--cyan);
        }

        .btn-sell:hover {
            background: rgba(95, 251, 241, 0.2);
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* Right Column - Stats */
        .stats-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .budget-box {
            border: 2px solid var(--cyan);
            padding: 10px;
            text-align: center;
        }

        .budget-amount {
            font-size: 1.5rem;
            color: var(--green);
        }

        .bars-container {
            display: flex;
            height: 100%;
            gap: 5px;
            border: 2px solid var(--cyan);
            padding: 2px;
            background: #000;
        }

        .bar-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            background: #111;
        }

        .bar-fill {
            width: 100%;
            transition: height 0.5s;
        }

        .bar-red {
            background: repeating-linear-gradient(45deg,
                    var(--red),
                    var(--red) 5px,
                    #000 5px,
                    #000 10px);
        }

        .bar-green {
            background: repeating-linear-gradient(0deg,
                    var(--green),
                    var(--green) 2px,
                    #000 2px,
                    #000 4px);
        }

        /* Bottom Row - Graphs */
        .graphs-row {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .graph-container {
            border: 1px solid var(--grid-line);
            padding: 5px;
            position: relative;
        }

        .graph-title {
            font-size: 0.8rem;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .chart-area {
            display: flex;
            align-items: flex-end;
            height: 80px;
            border-bottom: 1px solid var(--cyan);
            border-left: 1px solid var(--cyan);
            position: relative;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .buy-btn {
            position: absolute;
            right: 0;
            top: 20px;
            bottom: 0;
            width: 40px;
            border: 2px solid var(--cyan);
            color: var(--cyan);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: #000;
            cursor: pointer;
            z-index: 10;
        }

        .buy-btn:hover {
            background: rgba(95, 251, 241, 0.2);
        }

        .buy-btn:active {
            background: var(--cyan);
            color: #000;
        }
    </style>
</head>

<body class="crt">

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">$</div>
            <div>AUSTRIAN ECONOMICS</div>
            <div>üîº</div>
        </div>

        <!-- Left: Portrait -->
        <div class="portrait-panel">
            <div class="economist-face"></div>
            <div class="pills">üíäüíäüíä</div>
        </div>

        <!-- Middle: Action -->
        <div class="action-panel">
            <div class="status-box">
                <div>MANHOLE COVER STATUS:</div>
                <div class="status-text" id="coverStatus">NOT AVAILABLE</div>
            </div>
            <div class="manhole-display">
                <div class="manhole-cover missing" id="manholeCover">DANGER</div>
            </div>
            <button class="btn btn-steal" id="btnSteal" onclick="stealCover()">
                <span>STEAL COVER</span>
                <span>50‚òé</span>
            </button>
            <button class="btn btn-sell" id="btnSell" onclick="sellCover()" disabled>
                <span>SELL COVER</span>
                <span>15üèõ</span>
            </button>
        </div>

        <!-- Right: Stats -->
        <div class="stats-panel">
            <div class="budget-box">
                <div>DRUG BUDGET</div>
                <div class="budget-amount" id="budgetDisplay">98$</div>
            </div>
            <div class="bars-container">
                <div class="bar-col">
                    <div class="bar-fill bar-red" style="height: 30%"></div>
                </div>
                <div class="bar-col">
                    <div class="bar-fill bar-green" id="cashBar" style="height: 50%"></div>
                </div>
            </div>
        </div>

        <!-- Bottom: Graphs -->
        <div class="graphs-row">
            <!-- Graph 1 -->
            <div class="graph-container">
                <div class="graph-title">
                    <span>CRYPTO PRICES</span>
                    <span id="priceA">0.00</span>
                </div>
                <div class="chart-area">
                    <canvas id="canvasA"></canvas>
                    <div class="buy-btn" onclick="buyAsset('A')">
                        <span>B</span><span>U</span><span>Y</span>
                    </div>
                </div>
            </div>
            <!-- Graph 2 -->
            <div class="graph-container">
                <div class="graph-title">
                    <span>NFT PRICES</span>
                    <span id="priceB">0.00</span>
                </div>
                <div class="chart-area">
                    <canvas id="canvasB"></canvas>
                    <div class="buy-btn" onclick="buyAsset('B')">
                        <span>B</span><span>U</span><span>Y</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        const state = {
            cash: 98,
            hasCover: false,
            inventory: {
                assetA: 0,
                assetB: 0
            },
            prices: {
                assetA: 50,
                assetB: 50
            },
            history: {
                assetA: Array(20).fill(50),
                assetB: Array(20).fill(50)
            }
        };

        // DOM Elements
        const elBudget = document.getElementById('budgetDisplay');
        const elStatus = document.getElementById('coverStatus');
        const elCover = document.getElementById('manholeCover');
        const elBtnSteal = document.getElementById('btnSteal');
        const elBtnSell = document.getElementById('btnSell');
        const elCashBar = document.getElementById('cashBar');
        const elPriceA = document.getElementById('priceA');
        const elPriceB = document.getElementById('priceB');

        // Canvas Setup
        const cvsA = document.getElementById('canvasA');
        const cvsB = document.getElementById('canvasB');
        const ctxA = cvsA.getContext('2d');
        const ctxB = cvsB.getContext('2d');

        function resizeCanvas() {
            cvsA.width = cvsA.offsetWidth;
            cvsA.height = cvsA.offsetHeight;
            cvsB.width = cvsB.offsetWidth;
            cvsB.height = cvsB.offsetHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Game Logic
        function updateUI() {
            elBudget.innerText = Math.floor(state.cash) + "$";

            // Update Manhole UI
            if (state.hasCover) {
                elStatus.innerText = "AVAILABLE";
                elStatus.style.color = "var(--green)";
                elCover.classList.remove('missing');
                elBtnSteal.disabled = true;
                elBtnSell.disabled = false;
            } else {
                elStatus.innerText = "NOT AVAILABLE";
                elStatus.style.color = "var(--red)";
                elCover.classList.add('missing');
                elBtnSteal.disabled = false;
                elBtnSell.disabled = true;
            }

            // Update Bar
            let barHeight = Math.min(100, (state.cash / 200) * 100);
            elCashBar.style.height = barHeight + "%";

            // Update Prices Text
            elPriceA.innerText = state.prices.assetA.toFixed(2);
            elPriceB.innerText = state.prices.assetB.toFixed(2);
        }

        function stealCover() {
            // "Stealing" costs "Reputation" or just takes effort. 
            // For this sim, let's say it costs 5$ in bribes/tools, 
            // but if you have 0 money you can still do it (debt).
            state.cash -= 5;
            state.hasCover = true;
            updateUI();
        }

        function sellCover() {
            state.cash += 15;
            state.hasCover = false;
            updateUI();
        }

        function buyAsset(type) {
            const price = type === 'A' ? state.prices.assetA : state.prices.assetB;
            if (state.cash >= price) {
                state.cash -= price;
                if (type === 'A') state.inventory.assetA++;
                else state.inventory.assetB++;
                updateUI();
            } else {
                // Flash red
                elBudget.style.color = 'red';
                setTimeout(() => elBudget.style.color = 'var(--green)', 200);
            }
        }

        // Market Simulation
        function updateMarket() {
            // Random walk
            ['assetA', 'assetB'].forEach(asset => {
                let change = (Math.random() - 0.5) * 10;
                state.prices[asset] += change;
                if (state.prices[asset] < 1) state.prices[asset] = 1;
                if (state.prices[asset] > 100) state.prices[asset] = 100;

                // Update history
                state.history[asset].push(state.prices[asset]);
                if (state.history[asset].length > 20) state.history[asset].shift();
            });

            drawGraph(ctxA, state.history.assetA, '#5ffbf1');
            drawGraph(ctxB, state.history.assetB, '#5fff8f');
            updateUI();
        }

        function drawGraph(ctx, data, color) {
            const w = ctx.canvas.width;
            const h = ctx.canvas.height;
            ctx.clearRect(0, 0, w, h);

            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            const step = w / (data.length - 1);
            const maxVal = 100; // Fixed scale for stability

            data.forEach((val, i) => {
                const x = i * step;
                const y = h - (val / maxVal) * h;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }

        // Loop
        setInterval(updateMarket, 500);
        updateUI();

    </script>
</body>

</html>