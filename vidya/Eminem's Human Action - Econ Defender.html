<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eminem's Human Action: Econ Defender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap');

        body {
            background-color: #1a1a1a;
            color: #f0f0f0;
            font-family: 'Roboto Mono', monospace;
            overflow: hidden;
            touch-action: none;
        }

        /* The Book Visual - CSS Only Recreation of Human Action Cover */
        .book {
            width: 60px;
            height: 90px;
            background: white;
            position: absolute;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            transform: rotate(-10deg);
            display: flex;
            flex-direction: row;
            overflow: hidden;
            border: 1px solid #ccc;
            z-index: 10;
            pointer-events: none;
        }
        .book-spine {
            width: 45%;
            height: 100%;
            background: #004d99; /* Mises Blue */
            background-image: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 5px,
                rgba(255,255,255,0.1) 5px,
                rgba(255,255,255,0.1) 10px
            );
            position: relative;
        }
        .book-title {
            width: 55%;
            height: 100%;
            background: white;
            color: black;
            font-family: 'Oswald', sans-serif;
            font-size: 10px;
            line-height: 10px;
            padding-top: 10px;
            padding-left: 2px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .book-author {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 6px;
            color: #333;
        }

        /* Eminem / Rapper CSS Avatar */
        .rapper-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 140px;
            z-index: 20;
            transition: transform 0.1s;
        }
        .rapper-head {
            width: 60px;
            height: 70px;
            background: #e0ac69;
            border-radius: 30px;
            position: absolute;
            top: 20px;
            left: 30px;
            z-index: 5;
        }
        .rapper-cap {
            width: 64px;
            height: 30px;
            background: #333;
            border-radius: 30px 30px 0 0;
            position: absolute;
            top: 15px;
            left: 28px;
            z-index: 6;
        }
        .rapper-body {
            width: 100px;
            height: 60px;
            background: #111; /* Leather jacket */
            border-radius: 40px 40px 0 0;
            position: absolute;
            bottom: 0;
            left: 10px;
            z-index: 4;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.1);
        }
        .rapper-hand {
            width: 40px;
            height: 40px;
            background: #e0ac69;
            border-radius: 50%;
            position: absolute;
            bottom: 20px;
            right: -10px;
            z-index: 25;
            box-shadow: -2px 2px 5px rgba(0,0,0,0.5);
            animation: bounceHand 1s infinite alternate;
        }
        
        @keyframes bounceHand {
            from { transform: translateY(0); }
            to { transform: translateY(-5px); }
        }

        /* Game Elements */
        .enemy {
            position: absolute;
            font-size: 40px;
            user-select: none;
            animation: floatDown linear forwards;
            cursor: pointer;
            z-index: 5;
        }

        .projectile {
            transition: all 0.5s ease-in;
        }

        /* UI Overlay */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }

        .lyrics-box {
            background: rgba(0,0,0,0.8);
            border-left: 4px solid #004d99;
            padding: 15px;
            max-width: 400px;
            border-radius: 0 10px 10px 0;
            margin-top: 20px;
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.3s ease;
        }
        .lyrics-box.show {
            opacity: 1;
            transform: translateX(0);
        }

        .stat-pill {
            background: #333;
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #555;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 200;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(90deg, #004d99, #0066cc);
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 15px rgba(0, 77, 153, 0.5);
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(0, 77, 153, 0.8);
        }

        /* Explosion effect */
        .explosion {
            position: absolute;
            font-size: 30px;
            font-weight: bold;
            color: #ff4444;
            animation: fadeUp 0.8s forwards;
            pointer-events: none;
            text-shadow: 2px 2px 0px white;
        }
        @keyframes fadeUp {
            0% { opacity: 1; transform: scale(1) translateY(0); }
            100% { opacity: 0; transform: scale(1.5) translateY(-50px); }
        }

    </style>
</head>
<body>

    <!-- Start Screen -->
    <div id="start-screen" class="start-screen">
        <h1 class="text-5xl font-bold mb-2 font-oswald text-white" style="font-family: 'Oswald'">HUMAN ACTION</h1>
        <h2 class="text-xl text-gray-400 mb-8">THE PRAXEOLOGY RAP BATTLE</h2>
        <div class="mb-8 p-6 bg-gray-800 rounded-lg max-w-md border border-gray-700">
            <p class="mb-4">Yo, the economy is messy. Central banks are printing, inflation is rising.</p>
            <p class="text-sm text-gray-300">Tap the screen to throw <span class="text-blue-400 font-bold">"THE BOOK"</span> at bad economic ideas.</p>
        </div>
        <button class="btn-primary" onclick="startGame()">Start Spitting Facts</button>
    </div>

    <!-- Game UI -->
    <div id="ui-layer">
        <div class="flex justify-between w-full max-w-4xl mx-auto">
            <div class="stat-pill text-green-400">
                <span>ðŸ’µ</span> <span id="score">0</span> Sound Money
            </div>
            <div class="stat-pill text-red-400">
                <span>ðŸ“‰</span> <span id="inflation">0%</span> Inflation
            </div>
        </div>
        
        <div id="lyrics-display" class="lyrics-box">
            <h3 class="text-blue-400 text-xs uppercase font-bold mb-1">Eminem (Austrian School Remix)</h3>
            <p id="lyrics-text" class="text-sm italic">"Palms are sweaty, knees weak, arms are heavy..."</p>
        </div>
    </div>

    <!-- Game Area -->
    <div id="game-area" class="w-full h-full relative cursor-crosshair" onclick="handleTap(event)">
        
        <!-- The Rapper Avatar -->
        <div class="rapper-container" id="rapper">
            <div class="rapper-body"></div>
            <div class="rapper-head"></div>
            <div class="rapper-cap"></div>
            <!-- Hand holding the book initially -->
            <div class="rapper-hand"></div> 
            <div id="held-book" class="book" style="transform: scale(0.6) rotate(-20deg); bottom: 25px; right: -25px;">
                <div class="book-spine"></div>
                <div class="book-title">HUMAN<br>ACTION</div>
                <div class="book-author">Mises</div>
            </div>
        </div>

    </div>

    <script>
        // Game State
        let gameActive = false;
        let score = 0;
        let inflation = 2; // Starts at 2%
        let gameLoopId;
        let spawnLoopId;
        let lyricsInterval;

        // Elements
        const gameArea = document.getElementById('game-area');
        const scoreEl = document.getElementById('score');
        const inflationEl = document.getElementById('inflation');
        const lyricsBox = document.getElementById('lyrics-display');
        const lyricsText = document.getElementById('lyrics-text');
        const rapper = document.getElementById('rapper');
        const heldBook = document.getElementById('held-book');

        // Data
        const lyrics = [
            "His palms are sweaty, knees weak, arms are heavy / There's inflation on his sweater already, Keynes' spaghetti.",
            "You better lose yourself in the free market, the moment / You own it, you better never let the state control it.",
            "Snap back to reality, oh there goes gravity / Oh, there goes the fiat currency, choked by depravity.",
            "I'm beginning to feel like an Econ God, Econ God / All my people from the Austrian School nod, front to back nod.",
            "Supply and demand, that's the only law I obey / Central planners try to plan but they just get in the way.",
            "Look, if you had one shot, or one opportunity / To seize sound money for your community... would you capture it?",
            "Praxeology, the logic of action / Human behavior, not a mathematical fraction.",
            "They printing money like it's going out of style / But the purchasing power drops every single mile."
        ];

        const enemies = [
            { emoji: 'ðŸ–¨ï¸', name: 'Money Printer', speed: 2, points: 100 },
            { emoji: 'ðŸ¦', name: 'Central Bank', speed: 1.5, points: 150 },
            { emoji: 'ðŸ“‰', name: 'Price Control', speed: 2.5, points: 50 },
            { emoji: 'ðŸ‘»', name: 'Keynes Ghost', speed: 3, points: 200 },
            { emoji: 'ðŸ’¸', name: 'Stimulus Check', speed: 2.2, points: 75 }
        ];

        // Audio Simulation (Visual)
        const sounds = ["POW!", "FACTS!", "LOGIC!", "READ!", "BOOM!"];

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            gameActive = true;
            score = 0;
            inflation = 2.0;
            updateUI();
            
            // Start Loops
            spawnLoopId = setInterval(spawnEnemy, 1500);
            gameLoopId = requestAnimationFrame(gameLoop);
            
            // Start Lyrics
            cycleLyrics();
            lyricsInterval = setInterval(cycleLyrics, 5000);
        }

        function cycleLyrics() {
            lyricsBox.classList.remove('show');
            setTimeout(() => {
                const randomLine = lyrics[Math.floor(Math.random() * lyrics.length)];
                lyricsText.innerText = `"${randomLine}"`;
                lyricsBox.classList.add('show');
            }, 300);
        }

        function updateUI() {
            scoreEl.innerText = score.toLocaleString();
            inflationEl.innerText = inflation.toFixed(1) + '%';
            
            if (inflation > 50) {
                inflationEl.style.color = 'red';
                document.body.style.boxShadow = "inset 0 0 50px red";
            } else {
                document.body.style.boxShadow = "none";
            }
        }

        function spawnEnemy() {
            if (!gameActive) return;

            const type = enemies[Math.floor(Math.random() * enemies.length)];
            const el = document.createElement('div');
            el.classList.add('enemy');
            el.innerText = type.emoji;
            el.dataset.points = type.points;
            el.dataset.speed = type.speed;
            
            // Random X position
            const x = Math.random() * (window.innerWidth - 50);
            el.style.left = x + 'px';
            el.style.top = '-50px';
            
            gameArea.appendChild(el);

            // Increase difficulty
            if (Math.random() > 0.8) inflation += 0.5;
            updateUI();
            
            if (inflation > 100) gameOver();
        }

        function handleTap(e) {
            if (!gameActive) return;

            // Rapper animation
            rapper.style.transform = "translateX(-50%) scale(1.1)";
            setTimeout(() => rapper.style.transform = "translateX(-50%) scale(1)", 100);

            // Create projectile (The Book)
            const book = document.createElement('div');
            book.className = 'book';
            book.innerHTML = `
                <div class="book-spine"></div>
                <div class="book-title">HUMAN<br>ACTION</div>
                <div class="book-author">Mises</div>
            `;
            
            // Start position (from rapper hand)
            const startX = window.innerWidth / 2 + 20;
            const startY = window.innerHeight - 100;
            
            book.style.left = startX + 'px';
            book.style.top = startY + 'px';
            book.style.transition = 'all 0.6s cubic-bezier(0.19, 1, 0.22, 1)';
            
            gameArea.appendChild(book);

            // Force reflow
            book.getBoundingClientRect();

            // Target position (click coordinates)
            const targetX = e.clientX - 30; // center book
            const targetY = e.clientY - 45;

            // Calculate rotation based on direction
            const angle = Math.atan2(targetY - startY, targetX - startX) * 180 / Math.PI;

            book.style.transform = `translate(${targetX - startX}px, ${targetY - startY}px) rotate(${angle + 720}deg) scale(1.5)`;

            // Check collision after animation
            setTimeout(() => {
                checkHit(targetX, targetY);
                book.style.opacity = '0';
                setTimeout(() => book.remove(), 200);
            }, 600);
        }

        function checkHit(x, y) {
            const enemies = document.querySelectorAll('.enemy');
            const hitRadius = 60;
            let hit = false;

            enemies.forEach(enemy => {
                const rect = enemy.getBoundingClientRect();
                const enemyX = rect.left + rect.width / 2;
                const enemyY = rect.top + rect.height / 2;

                const dist = Math.hypot(x - enemyX, y - enemyY);

                if (dist < hitRadius) {
                    // Hit!
                    createExplosion(enemyX, enemyY, sounds[Math.floor(Math.random() * sounds.length)]);
                    score += parseInt(enemy.dataset.points);
                    inflation = Math.max(2, inflation - 0.5); // Reduce inflation
                    enemy.remove();
                    hit = true;
                }
            });

            if (!hit) {
                // Miss penalty
                inflation += 0.2;
            }
            updateUI();
        }

        function createExplosion(x, y, text) {
            const el = document.createElement('div');
            el.className = 'explosion';
            el.innerText = text;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            gameArea.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        function gameLoop() {
            if (!gameActive) return;

            const enemies = document.querySelectorAll('.enemy');
            enemies.forEach(enemy => {
                let top = parseFloat(enemy.style.top || -50);
                let speed = parseFloat(enemy.dataset.speed);
                
                // Move down
                top += speed;
                enemy.style.top = top + 'px';

                // Check if reached bottom
                if (top > window.innerHeight) {
                    enemy.remove();
                    inflation += 2.0; // Penalty for missing
                    updateUI();
                    if (inflation > 100) gameOver();
                }
            });

            gameLoopId = requestAnimationFrame(gameLoop);
        }

        function gameOver() {
            gameActive = false;
            clearInterval(spawnLoopId);
            cancelAnimationFrame(gameLoopId);
            clearInterval(lyricsInterval);
            
            document.getElementById('start-screen').style.display = 'flex';
            document.querySelector('#start-screen h1').innerText = "HYPERINFLATION!";
            document.querySelector('#start-screen h2').innerText = "You let the economy collapse.";
            document.querySelector('#start-screen button').innerText = "Try Again";
            
            // Clear enemies
            document.querySelectorAll('.enemy').forEach(e => e.remove());
        }

    </script>
</body>
</html>